# Что тут происходит?

* Сервис работает с датасетом Wine Quality. Сам файл лежит в `mlops_hw1/data/winequality-white.csv`. Первоисточник можно найти по [ссылке](https://archive.ics.uci.edu/ml/datasets/wine+Quality). Но мы воспользуемся воображением и представим, что на самом деле мы общаемся с БД сервиса, тем более это реализуется буквально заменой двух строк кода.
* У сервиса есть настраиваемые параметры:
  * `MAX_MODEL_NUM` - количество моделей, которые сервис может поддерживать одновременно. Если пользователь пытается добавить новую модель после достижения лимита - возвращается ошибка.
  * `DATA_PATH` - путь к датасету.
  * [TODO] - вынести параметры сервиса в `.conf`/`.yaml` файл.
* У HTTP сервиса есть следующие методы:
  * POST /models/add:
    **Спавнит новую модель с указанными гиперпараметрами**<br>
    Подробное описание требований к входным данным есть в swagger в разделе model<br>
    Подробное описание ошибок также есть в swagger<br>
  * GET /models/list:
    **Возвращает json со списком запущенных моделей, статусом обучения и скором на Train и Test**<br>
    Параметры не обрабатывает<br>
    Подробное описание ошибок также есть в swagger<br>
  * GET /models/train:
    **Запускает обучение указанной в параметрах модели**<br>
    Подробное описание требований к входным данным есть в swagger в разделе model<br>
    Подробное описание ошибок также есть в swagger<br>
  * DELETE /models/remove:
    **Удаляет указанную в параметрах модель**<br>
    Подробное описание требований к входным данным есть в swagger в разделе model<br>
    Подробное описание ошибок также есть в swagger<br>
  * POST /models/predict:
    **Возвращает предсказание указанной в payload модели на указанных в payload входных данных**<br>
    Подробное описание требований к входным данным есть в swagger в разделе model<br>
    Подробное описание ошибок также есть в swagger<br>
* Те же методы реализованы и для gRPC. См. [proto-файл](https://github.com/mgcrp/hse_mlops_2022/blob/master/hw1/mlops_hw1/grpc/grpc.proto) с контрактом

# Как запустить HTTP из нового окружения?

1) Переходим в директорию hw1
2) Ставим зависимости - `poetry install`
3) Запускаем приложение - `poetry run python mlops_hw1/app.py`
4) Открываем swagger на 80 порту и радуемся - http://127.0.0.1:5000
5) Можно баловаться в браузере

# Как запустить gRPC из нового окружения?

1) Переходим в директорию hw1
2) Ставим зависимости - `poetry install`
3) Запускаем приложение - `poetry run python mlops_hw1/grpc/app.py`
4) Я заранее написал тесты, которые проверяют все методы. Для тестирования в новом терминале:
    * Переходим в директорию hw1
    * Запускаем тесты - `poetry run python mlops_hw1/grpc/client.py`
